<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rea (rea.Rea)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">rea</a> &#x00BB; Rea</nav><header class="odoc-preamble"><h1>Module <code><span>Rea</span></code></h1><p>This is a framework for generic composable effectful asynchronous programming basically using only objects and polymorphic variants.</p><p>This whole framework and module is really designed to allow it to be used by opening the module:</p><pre class="language-ocaml"><code>open Rea</code></pre><p>This brings binding operators, such as <a href="#val-let*"><code>let*</code></a>, other operators, such as <a href="#val-(&gt;&gt;=)"><code>(&gt;&gt;=)</code></a>, as well as a large number of other combinators, such as <a href="#val-bind"><code>bind</code></a>, and types, such as <a href="class-bind'/index.html"><code>bind'</code></a>, into scope. The justification for this is that they are generic, or polymorphic with respect to the effect representation, and can easily subsume most other monadic libraries. Entire applications can be written so that no other binding operators need to be used.</p><p><b>WARNING</b>: Many of the combinators are documented concisely in the format <i>&quot;<code>X</code> is equivalent to <code>Y</code>&quot;</i>. The equivalence should only be assumed to hold modulo more or less obvious OCaml evaluation order differences.</p></header><nav class="odoc-toc"><ul><li><a href="#reference">Reference</a><ul><li><a href="#type-abbreviations">Type abbreviations</a></li><li><a href="#abstract-effect-framework">Abstract effect framework</a><ul><li><a href="#laziness">Laziness</a></li><li><a href="#running">Running</a></li><li><a href="#functors">Functors</a></li><li><a href="#pointed-functors">Pointed functors</a></li><li><a href="#applicative-functors">Applicative functors</a></li><li><a href="#selective-functors">Selective functors</a></li><li><a href="#sequencing-functors">Sequencing functors</a></li><li><a href="#alternatives">Alternatives</a></li><li><a href="#error-handling">Error handling</a></li><li><a href="#asynchronicity">Asynchronicity</a></li><li><a href="#environment">Environment</a><ul><li><a href="#dictionary">Dictionary</a></li><li><a href="#properties">Properties</a><ul><li><a href="#mutable-properties">Mutable properties</a></li></ul></li></ul></li></ul></li><li><a href="#interpreters">Interpreters</a><ul><li><a href="#for-stdlib">for Stdlib</a></li><li><a href="#data-types">Data types</a></li><li><a href="#tail-recursive">Tail recursive</a></li></ul></li><li><a href="#traversals">Traversals</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="reference"><a href="#reference" class="anchor"></a>Reference</h2><h3 id="type-abbreviations"><a href="#type-abbreviations" class="anchor"></a>Type abbreviations</h3><div class="odoc-spec"><div class="spec type anchored" id="type-ok"><a href="#type-ok" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a ok</span></span><span> = </span><span>[ </span></code><ol><li id="type-ok.Ok" class="def constructor anchored"><a href="#type-ok.Ok" class="anchor"></a><code><span>| </span></code><code><span>`Ok <span class="keyword">of</span> <span class="type-var">'a</span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Success type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-error"><a href="#type-error" class="anchor"></a><code><span><span class="keyword">type</span> <span>'e error</span></span><span> = </span><span>[ </span></code><ol><li id="type-error.Error" class="def constructor anchored"><a href="#type-error.Error" class="anchor"></a><code><span>| </span></code><code><span>`Error <span class="keyword">of</span> <span class="type-var">'e</span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Failure type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-res"><a href="#type-res" class="anchor"></a><code><span><span class="keyword">type</span> <span>('e, 'a) res</span></span><span> = </span><span>[ </span></code><ol><li id="type-res.ok" class="def type anchored"><a href="#type-res.ok" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'a</span> <a href="#type-ok">ok</a></span></span></code></li><li id="type-res.error" class="def type anchored"><a href="#type-res.error" class="anchor"></a><code><span>| </span></code><code><span><span><span class="type-var">'e</span> <a href="#type-error">error</a></span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Result type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-branch"><a href="#type-branch" class="anchor"></a><code><span><span class="keyword">type</span> <span>('l, 'r) branch</span></span><span> = </span><span>[ </span></code><ol><li id="type-branch.Fst" class="def constructor anchored"><a href="#type-branch.Fst" class="anchor"></a><code><span>| </span></code><code><span>`Fst <span class="keyword">of</span> <span class="type-var">'l</span></span></code></li><li id="type-branch.Snd" class="def constructor anchored"><a href="#type-branch.Snd" class="anchor"></a><code><span>| </span></code><code><span>`Snd <span class="keyword">of</span> <span class="type-var">'r</span></span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>Choice type abbrevation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cps"><a href="#type-cps" class="anchor"></a><code><span><span class="keyword">type</span> <span>('d, 'c) cps</span></span><span> = <span><span>(<span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span></span></code></div><div class="spec-doc"><p>Continuation passing style function type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-op'1"><a href="#type-op'1" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a op'1</span></span><span> = <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Unary operation type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-op'2"><a href="#type-op'2" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a op'2</span></span><span> = <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Binary operation type abbreviation.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-lazy_op'2"><a href="#type-lazy_op'2" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a lazy_op'2</span></span><span> = <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Lazy binary operation type abbrevation.</p></div></div><h3 id="abstract-effect-framework"><a href="#abstract-effect-framework" class="anchor"></a>Abstract effect framework</h3><p>The effect framework in this section is almost entirely free of concrete implementation details and should theoretically be usable in a wide variety of contexts including for wrapping existing monadic libraries.</p><p>The effect framework can also be extended by users. Consider the <a href="#val-map"><code>map</code></a> effect. It consists of</p><ul><li>the <a href="#type-map'm"><code>map'm</code></a> effect signature type abbreviation,</li><li>the <a href="class-map'/index.html"><code>map'</code></a> capability mix-in,</li><li>the <a href="#val-map"><code>map</code></a> combinator, and</li><li>the derived implementation in <a href="class-monad'd/index.html"><code>monad'd</code></a>.</li></ul><p>And, of course, various interpreters implement the <a href="class-map'/index.html"><code>map'</code></a> capability. The bottom line is that nothing prevents user defined extensions following the same pattern.</p><div class="odoc-spec"><div class="spec type anchored" id="type-nothing"><a href="#type-nothing" class="anchor"></a><code><span><span class="keyword">type</span> nothing</span><span> = </span><span>|</span></code></div><div class="spec-doc"><p>Empty variant type used to ensure that no errors can be left unhandled.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-s"><a href="#type-s" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, +'e, +'a) s</span></span></code></div><div class="spec-doc"><p>Abstract effect <code>s</code>ignature represents the application <code>('e, 'a) 'R</code> of the <a href="https://github.com/ocamllabs/higher">higher-kinded</a> effect representation type constructor <code>'R</code> to the error <code>'e</code> and answer <code>'a</code> types.</p><p>Basic use of this framework should rarely require one to refer to this type, but this type will appear in inferred types. When writing type signatures the effect reader type abbreviation <a href="#type-er"><code>er</code></a> should be preferred.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-er"><a href="#type-er" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) er</span></span><span> = <span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p>Effect reader takes a dictionary <code>'D</code> of capabilities and returns an effect with the signature <code>('R, 'e, 'a) s</code>.</p></div></div><h4 id="laziness"><a href="#laziness" class="anchor"></a>Laziness</h4><p>Effect readers are functions that take a dictionary of capabilities. This allows a form of laziness via Î·-expansion and effect signatures are designed to allow implementations to delay invoking the effect reader functions until the effects are really needed.</p><div class="odoc-spec"><div class="spec value anchored" id="val-eta'0"><a href="#val-eta'0" class="anchor"></a><code><span><span class="keyword">val</span> eta'0 : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>eta'0 @@ fun () -&gt; body</code> is equivalent to <code>fun d -&gt; body d</code>.</p><p>Consider the following <code>fib</code> implementation:</p><pre class="language-ocaml"><code>let rec fib n = eta'0 @@ fun () -&gt;
  if n &lt;= 1 then
    pure n
  else
    lift'2 (+) (fib (n - 2)) (fib (n - 1))</code></pre><p>The <code>eta'0 @@ fun () -&gt; ...</code> makes it so that <code>fib n</code> returns in O(1) time without building the complete computation tree.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eta'1"><a href="#val-eta'1" class="anchor"></a><code><span><span class="keyword">val</span> eta'1 : <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>eta'1 fn</code> is equivalent to <code>fun x d -&gt; fn x d</code>.</p><p>Consider the following list traversal implementation:</p><pre class="language-ocaml"><code>let rec map_er xyE = eta'1 @@ function
  | [] -&gt; pure []
  | x :: xs -&gt;
    let+ y = xyE x
    and+ ys = map_er xyE xs in
    y :: ys</code></pre><p>The <code>eta'1 @@ function ...</code> makes it so that <code>map_er xyE xs</code> returns in O(1) time without going through the whole list to compute a complete computation tree for it.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-eta'2"><a href="#val-eta'2" class="anchor"></a><code><span><span class="keyword">val</span> eta'2 : <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>eta'2 fn</code> is equivalent to <code>fun x y d -&gt; fn x y d</code>.</p></div></div><h4 id="running"><a href="#running" class="anchor"></a>Running</h4><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run d xE</code> is equivalent to <code>xE d</code>.</p></div></div><h4 id="functors"><a href="#functors" class="anchor"></a>Functors</h4><div class="odoc-spec"><div class="spec type anchored" id="type-map'm"><a href="#type-map'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'b, 'D) map'm</span></span><span> =
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-map'"><a href="#class-map'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-map'/index.html">map'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-map'of"><a href="#class-map'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-map'of/index.html">map'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-functr'"><a href="#class-functr'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-functr'/index.html">functr'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Functor offers the <a href="#val-map"><code>map</code></a> capability.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : 
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>map xy xE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let+"><a href="#val-let+" class="anchor"></a><code><span><span class="keyword">val</span> let+ : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( let+ ) xE xy</code> is equivalent to <code>map xy xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;&gt;-)"><a href="#val-(&gt;&gt;-)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;-) : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>xE &gt;&gt;- xy</code> is equivalent to <code>map xy xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;-&gt;)"><a href="#val-(&gt;-&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;-&gt;) : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'c</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>xyE &gt;-&gt; yz</code> is equivalent to <code>fun x -&gt; map yz (xyE x)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'1"><a href="#val-lift'1" class="anchor"></a><code><span><span class="keyword">val</span> lift'1 : 
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>lift'1 xy xE</code> is equivalent to <code>map xy xE</code>.</p></div></div><h4 id="pointed-functors"><a href="#pointed-functors" class="anchor"></a>Pointed functors</h4><div class="odoc-spec"><div class="spec type anchored" id="type-pure'm"><a href="#type-pure'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) pure'm</span></span><span> = <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-pure"><code>pure</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pure'"><a href="#class-pure'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-pure'/index.html">pure'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-pure"><code>pure</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pure'of"><a href="#class-pure'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-pure'of/index.html">pure'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-pure"><code>pure</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pointed'"><a href="#class-pointed'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-pointed'/index.html">pointed'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Pointed functor offers the <a href="#val-map"><code>map</code></a>, and <a href="#val-pure"><code>pure</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pointed'of"><a href="#class-pointed'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-pointed'of/index.html">pointed'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-pointed'/index.html">pointed'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a> and <a href="#val-pure"><code>pure</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure"><a href="#val-pure" class="anchor"></a><code><span><span class="keyword">val</span> pure : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure value</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure'0"><a href="#val-pure'0" class="anchor"></a><code><span><span class="keyword">val</span> pure'0 : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure'0 (fun () -&gt; exp)</code> is equivalent to <code>eta'0 (fun () -&gt; pure exp)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure'1"><a href="#val-pure'1" class="anchor"></a><code><span><span class="keyword">val</span> pure'1 : <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure'1 fn x1</code> is equivalent to <code>eta'0 (fun () -&gt; pure (fn x1))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure'2"><a href="#val-pure'2" class="anchor"></a><code><span><span class="keyword">val</span> pure'2 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure'2 fn x1 x2 x3</code> is equivalent to <code>eta'0 (fun () -&gt; pure (fn x1 x2))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure'3"><a href="#val-pure'3" class="anchor"></a><code><span><span class="keyword">val</span> pure'3 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure'3 fn x1 x2 x3</code> is equivalent to <code>eta'0 (fun () -&gt; pure (fn x1 x2 x3))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pure'4"><a href="#val-pure'4" class="anchor"></a><code><span><span class="keyword">val</span> pure'4 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pure'4 fn x1 x2 x3 x4</code> is equivalent to <code>eta'0 (fun () -&gt; pure (fn x1 x2 x3 x4))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-return"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>return value</code> is equivalent to <code>pure value</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>unit</code> is equivalent to <code>pure ()</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_unless"><a href="#val-do_unless" class="anchor"></a><code><span><span class="keyword">val</span> do_unless : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>do_unless b uE</code> is equivalent to <code>if b then unit else uE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_when"><a href="#val-do_when" class="anchor"></a><code><span><span class="keyword">val</span> do_when : <span>bool <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>do_when b uE</code> is equivalent to <code>if b then uE else unit</code>.</p></div></div><h4 id="applicative-functors"><a href="#applicative-functors" class="anchor"></a>Applicative functors</h4><div class="odoc-spec"><div class="spec type anchored" id="type-pair'm"><a href="#type-pair'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'b, 'D) pair'm</span></span><span> =
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-pair"><code>pair</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pair'"><a href="#class-pair'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-pair'/index.html">pair'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-pair"><code>pair</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-pair'of"><a href="#class-pair'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-pair'of/index.html">pair'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-pair"><code>pair</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-product'"><a href="#class-product'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-product'/index.html">product'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Product functor offers the <a href="#val-map"><code>map</code></a>, and <a href="#val-pair"><code>pair</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-product'of"><a href="#class-product'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-product'of/index.html">product'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a> and <a href="#val-pair"><code>pair</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-applicative'"><a href="#class-applicative'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-applicative'/index.html">applicative'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Applicative functor offers the <a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, and <a href="#val-pair"><code>pair</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-applicative'of"><a href="#class-applicative'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-applicative'of/index.html">applicative'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-applicative'/index.html">applicative'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, and <a href="#val-pair"><code>pair</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>pair xE yE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and+"><a href="#val-and+" class="anchor"></a><code><span><span class="keyword">val</span> and+ : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( and+ ) xE yE</code> is equivalent to <code>pair xE yE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;*&gt;)"><a href="#val-(&lt;*&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;*&gt;) : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>xE &lt;*&gt; yE</code> is equivalent to <code>pair xE yE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'2"><a href="#val-tuple'2" class="anchor"></a><code><span><span class="keyword">val</span> tuple'2 : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tuple'2 x1E x2E</code> is equivalent to <code>pair x1E x2E</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'3"><a href="#val-tuple'3" class="anchor"></a><code><span><span class="keyword">val</span> tuple'3 : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tuple'3 x1E x2E x3E</code> is equivalent to <code>map (fun (x1, (x2, x3)) -&gt; (x1, x2, x3)) (pair x1E (pair x2E x3E))</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'4"><a href="#val-tuple'4" class="anchor"></a><code><span><span class="keyword">val</span> tuple'4 : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tuple'4 x1E x2E x3E x4E</code> is like <a href="#val-tuple'3"><code>tuple'3</code></a>, but for 4 elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'5"><a href="#val-tuple'5" class="anchor"></a><code><span><span class="keyword">val</span> tuple'5 : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tuple'5 x1E x2E x3E x4E x5E</code> is like <a href="#val-tuple'3"><code>tuple'3</code></a>, but for 5 elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'6"><a href="#val-tuple'6" class="anchor"></a><code><span><span class="keyword">val</span> tuple'6 : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tuple'6 x1E x2E x3E x4E x5E x6E</code> is like <a href="#val-tuple'3"><code>tuple'3</code></a>, but for 6 elements.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'1"><a href="#val-map_er'1" class="anchor"></a><code><span><span class="keyword">val</span> map_er'1 : <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>map_er'1</code> is a synonym for <code>eta'1</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'2"><a href="#val-map_er'2" class="anchor"></a><code><span><span class="keyword">val</span> map_er'2 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b1</span> * <span class="type-var">'b2</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>2-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'3"><a href="#val-map_er'3" class="anchor"></a><code><span><span class="keyword">val</span> map_er'3 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b1</span> * <span class="type-var">'b2</span> * <span class="type-var">'b3</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>3-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'4"><a href="#val-map_er'4" class="anchor"></a><code><span><span class="keyword">val</span> map_er'4 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b1</span> * <span class="type-var">'b2</span> * <span class="type-var">'b3</span> * <span class="type-var">'b4</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>4-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'5"><a href="#val-map_er'5" class="anchor"></a><code><span><span class="keyword">val</span> map_er'5 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b5</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b1</span> * <span class="type-var">'b2</span> * <span class="type-var">'b3</span> * <span class="type-var">'b4</span> * <span class="type-var">'b5</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>5-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_er'6"><a href="#val-map_er'6" class="anchor"></a><code><span><span class="keyword">val</span> map_er'6 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b5</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b6</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'b1</span> * <span class="type-var">'b2</span> * <span class="type-var">'b3</span> * <span class="type-var">'b4</span> * <span class="type-var">'b5</span> * <span class="type-var">'b6</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>6-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'1"><a href="#val-map_eq_er'1" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'1 : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>map_eq_er'1</code> is a synonym for <code>eta'1</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'2"><a href="#val-map_eq_er'2" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'2 : 
  <span><span>(<span><span class="type-var">'a1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Physical equality preserving 2-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'3"><a href="#val-map_eq_er'3" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'3 : 
  <span><span>(<span><span class="type-var">'a1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Physical equality preserving 3-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'4"><a href="#val-map_eq_er'4" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'4 : 
  <span><span>(<span><span class="type-var">'a1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Physical equality preserving 4-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'5"><a href="#val-map_eq_er'5" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'5 : 
  <span><span>(<span><span class="type-var">'a1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a5</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Physical equality preserving 5-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_eq_er'6"><a href="#val-map_eq_er'6" class="anchor"></a><code><span><span class="keyword">val</span> map_eq_er'6 : 
  <span><span>(<span><span class="type-var">'a1</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a2</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a3</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a4</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a5</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a6</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a1</span> * <span class="type-var">'a2</span> * <span class="type-var">'a3</span> * <span class="type-var">'a4</span> * <span class="type-var">'a5</span> * <span class="type-var">'a6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Physical equality preserving 6-tuple traversal.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'2"><a href="#val-lift'2" class="anchor"></a><code><span><span class="keyword">val</span> lift'2 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>lift'2 xyz xE yE</code> is equivalent to <code>map (fun (x, y) -&gt; xyz x y) (pair xE yE)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'3"><a href="#val-lift'3" class="anchor"></a><code><span><span class="keyword">val</span> lift'3 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Lift 3-parameter function to operate on effect readers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'4"><a href="#val-lift'4" class="anchor"></a><code><span><span class="keyword">val</span> lift'4 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Lift 4-parameter function to operate on effect readers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'5"><a href="#val-lift'5" class="anchor"></a><code><span><span class="keyword">val</span> lift'5 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b5</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Lift 5-parameter function to operate on effect readers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lift'6"><a href="#val-lift'6" class="anchor"></a><code><span><span class="keyword">val</span> lift'6 : 
  <span><span>(<span><span class="type-var">'b1</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b2</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b3</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b4</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b5</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b6</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b1</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-product'/index.html">product'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b2</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b3</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b4</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b5</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b6</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p>Lift 6-parameter function to operate on effect readers.</p></div></div><h4 id="selective-functors"><a href="#selective-functors" class="anchor"></a>Selective functors</h4><div class="odoc-spec"><div class="spec type anchored" id="type-branch'm"><a href="#type-branch'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'b, 'c, 'D) branch'm</span></span><span> =
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-branch">branch</a></span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-branch"><code>branch</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-branch'"><a href="#class-branch'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-branch'/index.html">branch'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-branch"><code>branch</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-branch'of"><a href="#class-branch'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-branch'of/index.html">branch'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-branch'/index.html">branch'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-branch"><code>branch</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-selective'"><a href="#class-selective'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-selective'/index.html">selective'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Selective functor offers the <a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, <a href="#val-pair"><code>pair</code></a>, and <a href="#val-branch"><code>branch</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-selective'of"><a href="#class-selective'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-selective'of/index.html">selective'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-selective'/index.html">selective'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, <a href="#val-pair"><code>pair</code></a>, and <a href="#val-branch"><code>branch</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-branch"><a href="#val-branch" class="anchor"></a><code><span><span class="keyword">val</span> branch : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span>(<span class="type-var">'b</span>, <span class="type-var">'c</span>)</span> <a href="#type-branch">branch</a></span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-branch'/index.html">branch'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>branch baE caE bcE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-if_else_s"><a href="#val-if_else_s" class="anchor"></a><code><span><span class="keyword">val</span> if_else_s : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, bool, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-selective'/index.html">selective'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>if_else_s tE eE cE</code> is equivalent to</p><pre class="language-ocaml"><code>branch
  (map const eE)
  (map const tE)
  (map (function true  -&gt; `Fst ()
               | false -&gt; `Snd ())
       cE) </code></pre></div></div><h4 id="sequencing-functors"><a href="#sequencing-functors" class="anchor"></a>Sequencing functors</h4><div class="odoc-spec"><div class="spec type anchored" id="type-bind'm"><a href="#type-bind'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'b, 'D) bind'm</span></span><span> =
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-bind"><code>bind</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-bind'"><a href="#class-bind'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-bind'/index.html">bind'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-bind"><code>bind</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-bind'of"><a href="#class-bind'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-bind'of/index.html">bind'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-bind"><code>bind</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-monad'"><a href="#class-monad'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-monad'/index.html">monad'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Monad offers the <a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, <a href="#val-pair"><code>pair</code></a>, <a href="#val-branch"><code>branch</code></a>, and <a href="#val-bind"><code>bind</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-monad'of"><a href="#class-monad'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-monad'of/index.html">monad'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-monad'/index.html">monad'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-map"><code>map</code></a>, <a href="#val-pure"><code>pure</code></a>, <a href="#val-pair"><code>pair</code></a>, <a href="#val-branch"><code>branch</code></a>, and <a href="#val-bind"><code>bind</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-monad'd"><a href="#class-monad'd" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-monad'd/index.html">monad'd</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Implements defaults for <a href="#val-map"><code>map</code></a>, <a href="#val-pair"><code>pair</code></a>, and <a href="#val-branch"><code>branch</code></a> in terms of <a href="#val-pure"><code>pure</code></a> and <a href="#val-bind"><code>bind</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>bind xE xyE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;&gt;=)"><a href="#val-(&gt;&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;=) : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>xE &gt;&gt;= xyE</code> is equivalent to <code>bind xE xyE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let*"><a href="#val-let*" class="anchor"></a><code><span><span class="keyword">val</span> let* : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( let* ) xE xyE</code> is equivalent to <code>bind xyE xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and*"><a href="#val-and*" class="anchor"></a><code><span><span class="keyword">val</span> and* : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pair'/index.html">pair'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( and* ) xE yE</code> is equivalent to <code>pair xE yE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-join"><a href="#val-join" class="anchor"></a><code><span><span class="keyword">val</span> join : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>join xEE</code> is equivalent to <code>bind xEE (fun xE -&gt; xE)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;&gt;)"><a href="#val-(&gt;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;) : <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>uE &gt;&gt; xE</code> is equivalent to <code>bind uE (fun () -&gt; xE)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;=&gt;)"><a href="#val-(&gt;=&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;=&gt;) : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'c</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'c</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>xyE &gt;=&gt; yzE</code> is equivalent to <code>fun x -&gt; bind (xyE x) yzE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(|||)"><a href="#val-(|||)" class="anchor"></a><code><span><span class="keyword">val</span> (|||) : <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, bool, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-monad'/index.html">monad'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'2">op'2</a></span></span></code></div><div class="spec-doc"><p><code>lE ||| rE</code> is equivalent to <code>bind lE (function true -&gt; pure true | false -&gt; rE)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&amp;&amp;&amp;)"><a href="#val-(&amp;&amp;&amp;)" class="anchor"></a><code><span><span class="keyword">val</span> (&amp;&amp;&amp;) : <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, bool, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-monad'/index.html">monad'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'2">op'2</a></span></span></code></div><div class="spec-doc"><p><code>lE &amp;&amp;&amp; rE</code> is equivalent to <code>bind lE (function true -&gt; rE | false -&gt; pure true)</code>.</p></div></div><h4 id="alternatives"><a href="#alternatives" class="anchor"></a>Alternatives</h4><div class="odoc-spec"><div class="spec type anchored" id="type-zero'm"><a href="#type-zero'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) zero'm</span></span><span> = <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-zero"><code>zero</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-zero'"><a href="#class-zero'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-zero'/index.html">zero'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-zero"><code>zero</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-zero'of"><a href="#class-zero'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-zero'of/index.html">zero'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-zero'/index.html">zero'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-zero"><code>zero</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-alt'm"><a href="#type-alt'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) alt'm</span></span><span> =
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-alt"><code>alt</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-alt'"><a href="#class-alt'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-alt'/index.html">alt'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-alt"><code>alt</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-alt'of"><a href="#class-alt'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-alt'of/index.html">alt'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-alt'/index.html">alt'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-alt"><code>alt</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-plus'"><a href="#class-plus'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-plus'/index.html">plus'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Plus offers the <a href="#val-zero"><code>zero</code></a> and <a href="#val-alt"><code>alt</code></a> capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-plus'of"><a href="#class-plus'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-plus'of/index.html">plus'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-plus'/index.html">plus'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-zero"><code>zero</code></a> and <a href="#val-alt"><code>alt</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span><span class="keyword">val</span> zero : <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-zero'/index.html">zero'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>zero</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-alt"><a href="#val-alt" class="anchor"></a><code><span><span class="keyword">val</span> alt : <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-alt'/index.html">alt'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'2">op'2</a></span></span></code></div><div class="spec-doc"><p><code>alt lE rE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;|&gt;)"><a href="#val-(&lt;|&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;|&gt;) : <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-alt'/index.html">alt'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'2">op'2</a></span></span></code></div><div class="spec-doc"><p><code>lE &lt;|&gt; rE</code> is equivalent to <code>alt lE rE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iota"><a href="#val-iota" class="anchor"></a><code><span><span class="keyword">val</span> iota : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, int, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-pure'/index.html">pure'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-plus'/index.html">plus'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>iota n</code> is equivalent to <code>zero &lt;|&gt; pure 0 &lt;|&gt; ... &lt;|&gt; pure (n-1)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span><span class="keyword">val</span> filter : 
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-zero'/index.html">zero'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>filter p</code></p></div></div><h4 id="error-handling"><a href="#error-handling" class="anchor"></a>Error handling</h4><div class="odoc-spec"><div class="spec type anchored" id="type-fail'm"><a href="#type-fail'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) fail'm</span></span><span> = <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-fail"><code>fail</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-fail'"><a href="#class-fail'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-fail'/index.html">fail'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-fail"><code>fail</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-fail'of"><a href="#class-fail'of" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'O, 'D] </span><span><a href="class-fail'of/index.html">fail'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-fail'/index.html">fail'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-fail"><code>fail</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-tryin'm"><a href="#type-tryin'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'f, 'a, 'b, 'D) tryin'm</span></span><span> =
  <span><span>(<span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'f</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-tryin"><code>tryin</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-tryin'"><a href="#class-tryin'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-tryin'/index.html">tryin'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-tryin"><code>tryin</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-tryin'of"><a href="#class-tryin'of" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'O, 'D] </span><span><a href="class-tryin'of/index.html">tryin'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-tryin'/index.html">tryin'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-tryin"><code>tryin</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-errors'"><a href="#class-errors'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-errors'/index.html">errors'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Error handling offers the <a href="#val-fail"><code>fail</code></a>, and <a href="#val-tryin"><code>tryin</code></a>.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-errors'of"><a href="#class-errors'of" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'O, 'D] </span><span><a href="class-errors'of/index.html">errors'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-errors'/index.html">errors'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-fail"><code>fail</code></a> and <a href="#val-tryin"><code>tryin</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span><span class="keyword">val</span> fail : <span><span class="type-var">'e</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-fail'/index.html">fail'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>fail error</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tryin"><a href="#val-tryin" class="anchor"></a><code><span><span class="keyword">val</span> tryin : 
  <span><span>(<span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-tryin'/index.html">tryin'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'f</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>tryin exE yxE xE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-catch"><a href="#val-catch" class="anchor"></a><code><span><span class="keyword">val</span> catch : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-pure'/index.html">pure'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-tryin'/index.html">tryin'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'f</span>, <span><span>(<span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-res">res</a></span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>catch xE</code> is equivalent to <code>tryIn (fun e -&gt; pure (`Error e)) (fun x -&gt; pure (`Ok x)) xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle"><a href="#val-handle" class="anchor"></a><code><span><span class="keyword">val</span> handle : 
  <span><span>(<span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-pure'/index.html">pure'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-tryin'/index.html">tryin'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'f</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>handle exE xE</code> is equivalent to <code>tryin exE pure xE</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-finally"><a href="#val-finally" class="anchor"></a><code><span><span class="keyword">val</span> finally : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-errors'/index.html">errors'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>finally uE xE</code> is equivalent to <code>tryin (fun e -&gt; bind uE (fun () -&gt; fail e)) (fun x -&gt; bind uE (fun () -&gt; pure x)) xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_error"><a href="#val-map_error" class="anchor"></a><code><span><span class="keyword">val</span> map_error : 
  <span><span>(<span><span class="type-var">'f</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'e</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'f</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-pure'/index.html">pure'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-errors'/index.html">errors'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>map_error fe xE</code> is equivalent to <code>tryin (fun f -&gt; fail (fe e)) pure xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-gen_error"><a href="#val-gen_error" class="anchor"></a><code><span><span class="keyword">val</span> gen_error : 
  <span><span><span>(<span class="type-var">'R</span>, <a href="#type-nothing">nothing</a>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-pure'/index.html">pure'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-errors'/index.html">errors'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>gen_error xE</code> is equivalent to <code>map_error (function (_: nothing) -&gt; .) xE</code>.</p></div></div><h4 id="asynchronicity"><a href="#asynchronicity" class="anchor"></a>Asynchronicity</h4><div class="odoc-spec"><div class="spec type anchored" id="type-par'm"><a href="#type-par'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'b, 'D) par'm</span></span><span> = <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-pair'm">pair'm</a></span></span></code></div><div class="spec-doc"><p><a href="#val-par"><code>par</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-par'"><a href="#class-par'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-par'/index.html">par'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-par"><code>par</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-par'of"><a href="#class-par'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-par'of/index.html">par'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-par'/index.html">par'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-par"><code>par</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-par"><a href="#val-par" class="anchor"></a><code><span><span class="keyword">val</span> par : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-par'/index.html">par'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>par xE yE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let&amp;+"><a href="#val-let&amp;+" class="anchor"></a><code><span><span class="keyword">val</span> let&amp;+ : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-map'/index.html">map'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( let&amp;+ ) xE xy</code> is equivalent to <code>map xy xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and&amp;+"><a href="#val-and&amp;+" class="anchor"></a><code><span><span class="keyword">val</span> and&amp;+ : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-par'/index.html">par'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( and&amp;+ ) xE yE</code> is equivalent to <code>par xE yE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let&amp;*"><a href="#val-let&amp;*" class="anchor"></a><code><span><span class="keyword">val</span> let&amp;* : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-bind'/index.html">bind'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( let&amp;* ) xE xyE</code> is equivalent to <code>bind xyE xE</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and&amp;*"><a href="#val-and&amp;*" class="anchor"></a><code><span><span class="keyword">val</span> and&amp;* : 
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-par'/index.html">par'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>( and&amp;* ) xE yE</code> is equivalent to <code>par xE yE</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-suspend'm"><a href="#type-suspend'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'a, 'D) suspend'm</span></span><span> = <span><span><span>(<span><span>(<span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-res">res</a></span>, unit)</span> <a href="#type-cps">cps</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-suspend"><code>suspend</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-suspend'"><a href="#class-suspend'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-suspend'/index.html">suspend'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-suspend"><code>suspend</code></a> capability mix-in.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-suspend'of"><a href="#class-suspend'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-suspend'of/index.html">suspend'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-suspend'/index.html">suspend'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-suspend"><code>suspend</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-suspend"><a href="#val-suspend" class="anchor"></a><code><span><span class="keyword">val</span> suspend : 
  <span><span><span>(<span><span>(<span class="type-var">'e</span>, <span class="type-var">'a</span>)</span> <a href="#type-res">res</a></span>, unit)</span> <a href="#type-cps">cps</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-suspend'/index.html">suspend'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>suspend with_resume</code> effect.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-spawn'm"><a href="#type-spawn'm" class="anchor"></a><code><span><span class="keyword">type</span> <span>('R, 'e, 'D) spawn'm</span></span><span> = <span><span><span>(<span class="type-var">'R</span>, <a href="#type-nothing">nothing</a>, unit, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit)</span> <a href="#type-s">s</a></span></span></code></div><div class="spec-doc"><p><a href="#val-spawn"><code>spawn</code></a> effect signature.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-spawn'"><a href="#class-spawn'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-spawn'/index.html">spawn'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-spawn"><code>spawn</code></a> effect capability.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-spawn'of"><a href="#class-spawn'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-spawn'of/index.html">spawn'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-spawn'/index.html">spawn'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="#val-spawn"><code>spawn</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-sync'"><a href="#class-sync'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-sync'/index.html">sync'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="class-monad'/index.html"><code>monad'</code></a> and <a href="class-errors'/index.html"><code>errors'</code></a> effect capabilities.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-sync'of"><a href="#class-sync'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-sync'of/index.html">sync'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-sync'/index.html">sync'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="class-sync'/index.html"><code>sync'</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-async'"><a href="#class-async'" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-async'/index.html">async'</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="class-monad'/index.html"><code>monad'</code></a>, <a href="class-errors'/index.html"><code>errors'</code></a>, <a href="class-suspend'/index.html"><code>suspend'</code></a>, <a href="class-par'/index.html"><code>par'</code></a>, and <a href="class-spawn'/index.html"><code>spawn'</code></a> effect capabilites.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-async'of"><a href="#class-async'of" class="anchor"></a><code><span><span class="keyword">class</span> ['R, 'O, 'D] </span><span><a href="class-async'of/index.html">async'of</a></span><span> : <span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'O</span>]</span> <a href="class-async'/index.html">async'</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><a href="class-async'/index.html"><code>async'</code></a> capability projection.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-spawn"><a href="#val-spawn" class="anchor"></a><code><span><span class="keyword">val</span> spawn : 
  <span><span><span>(<span class="type-var">'R</span>, <a href="#type-nothing">nothing</a>, unit, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-spawn'/index.html">spawn'</a></span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>spawn uE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec class anchored" id="class-par'd"><a href="#class-par'd" class="anchor"></a><code><span><span class="keyword">class</span> <span class="keyword">virtual</span> ['R, 'D] </span><span><a href="class-par'd/index.html">par'd</a></span><span> : <span class="keyword">object</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Implements <a href="#val-par"><code>par</code></a>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Memo"><a href="#module-Memo" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Memo/index.html">Memo</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Memoized lazy computation for asynchronous programming.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Mut"><a href="#module-Mut" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Mut/index.html">Mut</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Mutable ref cells for asynchronous programming.</p></div></div><h4 id="environment"><a href="#environment" class="anchor"></a>Environment</h4><p>The environment or reader is built-in to the effect system in the form of the capability dictionary. Thanks to OCaml's structural objects, it is possible to extend the dictionary for user needs.</p><h5 id="dictionary"><a href="#dictionary" class="anchor"></a>Dictionary</h5><div class="odoc-spec"><div class="spec value anchored" id="val-env"><a href="#val-env" class="anchor"></a><code><span><span class="keyword">val</span> env : <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>env</code> effect returns the dictionary <code>'d</code> of capabilities.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-env_as"><a href="#val-env_as" class="anchor"></a><code><span><span class="keyword">val</span> env_as : <span><span>(<span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>env_as fn</code> effect returns the value of type <code>'a</code> computed from the dictionary of capabilities of type <code>'d</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapping_env"><a href="#val-mapping_env" class="anchor"></a><code><span><span class="keyword">val</span> mapping_env : <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'S</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'S</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>mapping_env fn er</code> effect executes the effect <code>er</code> with the dictionary of capabilities of type <code>'D</code> mapped through the given function <code>fn</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setting_env"><a href="#val-setting_env" class="anchor"></a><code><span><span class="keyword">val</span> setting_env : <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'s</span>)</span> <a href="#type-er">er</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>setting_env s er</code> effect executes the effect <code>er</code> with the given dictionary <code>s</code> of capabilities.</p></div></div><h5 id="properties"><a href="#properties" class="anchor"></a>Properties</h5><div class="odoc-spec"><div class="spec module anchored" id="module-Prop"><a href="#module-Prop" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Prop/index.html">Prop</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An abstraction for accessing instance variables or properties of objects.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prop"><a href="#val-prop" class="anchor"></a><code><span><span class="keyword">val</span> prop : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Prop/index.html#type-t">Prop.t</a></span></span></code></div><div class="spec-doc"><p><code>prop get set</code> is equivalent to <code>Prop.make get set</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span>(<span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>get prop_of</code> effect returns the value of the property from the dictionary of capabilities of type <code>'d</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_as"><a href="#val-get_as" class="anchor"></a><code><span><span class="keyword">val</span> get_as : 
  <span><span>(<span><span><span>[<span class="type-var">'R</span>, <span class="type-var">'D</span>]</span> <a href="class-pure'/index.html">pure'</a></span> <span class="keyword">as</span> 'D <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>get_as prop_of fn</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mapping"><a href="#val-mapping" class="anchor"></a><code><span><span class="keyword">val</span> mapping : 
  <span><span>(<span><span>&lt; .. &gt;</span> <span class="keyword">as</span> 'D <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'p</span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'p</span> <a href="#type-op'1">op'1</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>mapping prop_of fn xE</code> effect executes the effect <code>xE</code> with the property of the dictionary of capabilities mapped through the given function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-setting"><a href="#val-setting" class="anchor"></a><code><span><span class="keyword">val</span> setting : <span><span>(<span><span>&lt; .. &gt;</span> <span class="keyword">as</span> 'D <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'p</span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'p</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>setting prop_of value xE</code> effect executess the effect <code>xE</code> with the property of the dictionary of capabilities set to given <code>value</code>.</p></div></div><h6 id="mutable-properties"><a href="#mutable-properties" class="anchor"></a>Mutable properties</h6><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'v</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>read prop_of</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mutate"><a href="#val-mutate" class="anchor"></a><code><span><span class="keyword">val</span> mutate : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'v</span> <a href="#type-op'1">op'1</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, unit, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>mutate prop_of vv</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-modify"><a href="#val-modify" class="anchor"></a><code><span><span class="keyword">val</span> modify : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'v</span> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>modify prop_of vva</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_mutate"><a href="#val-try_mutate" class="anchor"></a><code><span><span class="keyword">val</span> try_mutate : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'v</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>,
    <span class="type-var">'e</span>,
    unit,
    <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span>
    ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-errors'/index.html">errors'</a></span>
    ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span>
    <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>try_mutate prop_of vvE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_modify"><a href="#val-try_modify" class="anchor"></a><code><span><span class="keyword">val</span> try_modify : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'v</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'v</span> * <span class="type-var">'a</span>, <span class="type-var">'D</span>)</span> <a href="#type-er">er</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'R</span>,
    <span class="type-var">'e</span>,
    <span class="type-var">'a</span>,
    <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span>
    ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-errors'/index.html">errors'</a></span>
    ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span>
    <a href="#type-er">er</a></span></span></code></div><div class="spec-doc"><p><code>try_modify prop_of vvaE</code> effect.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cloning"><a href="#val-cloning" class="anchor"></a><code><span><span class="keyword">val</span> cloning : 
  <span><span>(<span><span class="type-var">'D</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'v</span> <a href="Mut/index.html#type-t">Mut.t</a></span> <a href="Prop/index.html#type-t">Prop.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'R</span>, <span class="type-var">'e</span>, <span class="type-var">'a</span>, <span>&lt; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-monad'/index.html">monad'</a></span> ; <span><span>(<span class="type-var">'R</span>, <span class="type-var">'D</span>)</span> <a href="class-suspend'/index.html">suspend'</a></span>.. &gt;</span> <span class="keyword">as</span> 'D)</span> <a href="#type-er">er</a></span> <a href="#type-op'1">op'1</a></span></span></code></div><div class="spec-doc"><p><code>cloning prop_of xE</code> effect.</p></div></div><h3 id="interpreters"><a href="#interpreters" class="anchor"></a>Interpreters</h3><p>Users can and often should implement their own interpreters that only allow specific limited sets of effects. This package is intended to only provide the core framework for effectul programming.</p><h4 id="for-stdlib"><a href="#for-stdlib" class="anchor"></a>for Stdlib</h4><div class="odoc-spec"><div class="spec module anchored" id="module-StdRea"><a href="#module-StdRea" class="anchor"></a><code><span><span class="keyword">module</span> <a href="StdRea/index.html">StdRea</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Stdlib</code> extension modules.</p></div></div><h4 id="data-types"><a href="#data-types" class="anchor"></a>Data types</h4><div class="odoc-spec"><div class="spec module anchored" id="module-Constant"><a href="#module-Constant" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Constant/index.html">Constant</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Constant functor, products, and applicatives.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Identity"><a href="#module-Identity" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Identity/index.html">Identity</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Identity monad.</p></div></div><h4 id="tail-recursive"><a href="#tail-recursive" class="anchor"></a>Tail recursive</h4><div class="odoc-spec"><div class="spec module anchored" id="module-Tailrec"><a href="#module-Tailrec" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Tailrec/index.html">Tailrec</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A self tail recursive interpreter usable with <a href="https://ocsigen.org/js_of_ocaml/latest/manual/tailcall">Js_of_ocaml</a>.</p></div></div><h3 id="traversals"><a href="#traversals" class="anchor"></a>Traversals</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Traverse"><a href="#module-Traverse" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Traverse/index.html">Traverse</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Data type traversal use cases.</p></div></div></div></body></html>